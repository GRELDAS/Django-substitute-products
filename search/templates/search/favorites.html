{% extends "base.html" %}
{% block title %}Résultats{% endblock %}
{% block css %}
{% load static %}
<style type="text/css">
    header {
        margin:0;
        padding:0;
        background-image: url({% static 'img/background.jpg' %});
        -webkit-background-size: cover; /* pour anciens Chrome et Safari */
        background-size: cover; /* version standardisée */ }
</style>
{% endblock %}
{% block header %}
<div class="container-fluid">

    <div class="row">
        <div class="col-0 col-md-3"></div>
        <div class="col-12 col-md-6 text-center">
            <h2 class="mt-5 p-2 search">Vos produits enregistrés</h2>
        </div>
        <div class="col-0 col-md-3"></div>
    </div>

</div>
{% endblock %}

{% block content %}
<section class="container-fluid">

    <div class="row p-2">

        {% if favorites %}

            {% for favorite in favorites %}

                <div class="col-12 col-md-4 thumbnail text-center p-4">

                    <div class="nutriscores nutriscore-{{ favorite.product_nutriscore }} rounded-circle">
                        {{ favorite.product_nutriscore }}
                    </div>

                    {% load static %}
                    <a href="{% url 'product' favorite.id %}">
                        <img src="{{ favorite.product_image_url }}" class="img-fluid img-thumbnail" alt="">
                    </a>

                    <h2 class="p-2">{{ favorite.product_name }}</h2>

                    {% load static %}

                    <a href="{% url 'substitutes' favorite.id %}" class="btn btn-outline-success active" role="button" aria-pressed="true">Substituts</a>
                    <a href="{% url 'del_favorite' favorite.id %}" class="btn btn-outline-danger active" role="button" aria-pressed="true">Delete</a>
                </div>
            {% endfor %}

            {% else %}

            <div class="col-12 col-md-4"></div>
            <div class="col-12 col-md-4 text-center p-4">
                <h2> Vous n'avez pas encore de produit dans vos favorits</h2>
            </div>
            <div class="col-12 col-md-4"></div>

        {% endif %}

    </div>

</section>

{% if favorites %}

    <section class="container-fluid">

        <div class="row p-2">

            <div>
                {% if favorites.has_previous %}
                    <a class="btn btn-outline-secondary" href="?page=1&name={{ product_name }}">&laquo; first</a>
                    <a class="btn btn-dark" href="?page={{ favorites.previous_page_number }}&name={{ product_name }}">previous</a>
                {% endif %}

                <span class="p-2">
                    Page {{ favorites.number }} sur {{ favorites.paginator.num_pages }}
                </span>

                {% if favorites.has_next %}
                    <a class="btn btn-dark" href="?page={{ favorites.next_page_number }}&name={{ product_name }}">next</a>
                    <a class="btn btn-outline-secondary" href="?page={{ favorites.paginator.num_pages }}&name={{ product_name }}">last &raquo;</a>
                {% endif %}
            </div>

        </div>

    </section>
{% endif %}

{% endblock %}